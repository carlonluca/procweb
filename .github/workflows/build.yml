name: Build
on: push

jobs:
    build:
        runs-on: ubuntu-22.04
        container:
            image: carlonluca/procweb-ci:latest
        steps:
          - name: Checkout
            uses: actions/checkout@v3
            with:
                submodules: true
          - name: Build
            shell: bash
            run: |
                cd procweb-webui
                npm config set prefix '~/.npm-global'
                npm config set cache '~/.npm-cache'
                echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.profile
                source ~/.profile
                ./build.sh